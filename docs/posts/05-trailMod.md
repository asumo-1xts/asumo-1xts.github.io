---
layout: doc

emoji: 🔨
title: DOD FX96をトレイルバイパス化
description: ｱｽﾓのﾒﾓﾗﾝﾀﾞ、ｱｽﾓﾗﾝﾀﾞ

date: 2025-09-24
permalink: "https://asumoranda.com/posts/05-trailMod.html"

prev: false
next: false

tags:
  - modpedals
  - pic
  - ccpp
---

[エフェクター改造](../tags/modpedals) | [PIC](../tags/pic) | [C/C++](../tags/ccpp)

# DOD FX-96をトレイルバイパス化

::: warning
正しい情報を記載するよう努めていますが、それはそれとして当方は一切の責任を負いかねます。

いかなる作業も自己責任で行っていただくようお願いいたします。
:::

## はじめに

ご依頼を受けてDOD FX96 \[Echo FX\] のトレイルバイパス化を行ったので、その工程を簡単にまとめておきます。

<div align="center">

<iframe width="336" height="189" src="https://www.youtube.com/embed/UQoQh8HNo6M" title="Trail bypass MOD -  DOD FX96 [Echo FX]" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

</div>

ちょっと動画自体の音が小さいかもしれません。

当初は手前味噌ながら[Module-02](https://x.com/asumo_1xts/status/1931595236322463905)なるトレイルバイパスモジュールを使う予定だったのですが、より合理的な方法が見つかったので出番なしでした。

## 方針

このエフェクターでは、エフェクトON/OFFの切り替え時に論理回路で3つの動作を行います。

|  | エフェクトON | エフェクトOFF |
| ---- | ---- | ---- |
| ① MIXノブ | 有効化 | 無効化 |
| ② Wet信号（ディレイ音） | ミュート解除 | ミュート |
| ③ LED | 点灯 | 消灯 |

今回のトレイルバイパス化にあたっては、これら3つの動作をマイコンで肩代わりしたうえで、さらに4つ目の動作を追加します。

|  | エフェクトON | エフェクトOFF |
| ---- | ---- | ---- |
| ④ **ディレイ回路に入る直前の**Dry信号（原音） | ミュート解除 | ミュート |

以上4つの動作を回路図上で番号ごとに示したのが次の図です。元の回路図は[この記事の執筆時点でググると出てくるもの](https://experimentalistsanonymous.com/diy/Schematics/Delay%20Echo%20and%20Samplers/DOD%20FX96.pdf)で、実機と見比べて異なる点は見つかりませんでした。

<ImageGroup
  :sources="[
    '/images/2025/05-01.webp',
  ]"
  type="big"
/>

## 部品の取り外し

以下の部品を取り外します。

| リファレンス番号 | 値 |
| ---- | ---- |
| Q2 | J201 |
| Q3 | 2N5088 |
| U7 | 4007A |
| C41 | 0.22u |
| R40 | 1M |
| R46 | 10k |

::: tip
ついでに全ての電解コンデンサを同等の新品と交換しました。体感的に、「エフェクトかかりません」を理由にジャンクになっている古い揺れ/空間系エフェクターの大半は電解コンデンサの寿命が原因であるように思います。もっともジャンクを漁る者としてはそこが狙い目な訳ですが…
:::

## 新しい回路の取り付け

### 実態配線図

部品を取り外した跡地めがけて以下の基板を繋ぎます。マイコンは在庫が沢山あるという理由でPIC12F675を使っています。SW1（フットスイッチ）およびD1（LED）は別に取り外していないので、足に絡めてはんだ付けします。

<ImageGroup
  :sources="[
    '/images/2025/05-02.webp',
  ]"
  type="big"
/>

#### Q2とC41

回路が部分的にそっくり挿げ替えられているのがQ2（方針①）およびC41（方針④）の部分で、上の実態配線図ではQ2が左の基板に、C41が右の基板の上部に対応しています。これらは回路図で見るとそれぞれ次のようになっています。

<ImageGroup
  :sources="[
    '/images/2025/05-03.webp',
    '/images/2025/05-04.webp',
  ]"
  type="double"
  caption="← Q2 | C41 →"
/>

::: tip
エフェクター全体の駆動電圧が+9Vで固定ならばQ2は取り外さずとも事足ります。このときバイアス電圧は+4.5Vなので、マイコンからQ2に+5V（HIGH）/0V（LOW）を与えるだけでQ2のON/OFFを制御できるからです。しかしこの方式でエフェクター全体の駆動電圧が+10Vを超えると、バイアス電圧が+5V以上になるのでQ2で常に$V_\mathrm{S}\geq V_\mathrm{G}$となってしまい制御が効きません。

このエフェクターでは駆動電圧がディレイ音に大きく影響するので、+9Vより大きい電圧で駆動することにかなり意義があります。従って、どうせならQ2を取り外す今回の方式の方がベターかなと思います。

ちなみにディレイ用チップたちの受けられる電圧が-18Vまで（※これらのICは内部的には負電源で動かしている）なので、エフェクターとしての実質的な耐圧は+18V弱になると思われます。
:::

## ソースコード

電源投入時のオプション設定（オルタネイト/モーメンタリなど）を含めてしまっているので量が多くなってしまっていますが、重要な処理は`TURN()`、`scanModeSw()`あたりでしょうか。具体的に何が起こっているのかの説明はコメントアウトに託しました。

::: code-group
<<< @/snippets/2025/05-main.c{c} [main.c ~vscode-icons:file-type-c~]
<<< @/snippets/2025/05-header.h{c} [header.h ~vscode-icons:file-type-cheader~]
<<< @/snippets/2025/05-common.c{c} [common.c ~vscode-icons:file-type-c~]
<<< @/snippets/2025/05-PIC12F6XX.c{c} [PIC12F6XX.c ~vscode-icons:file-type-c~]
:::

## 完了

<ImageGroup
  :sources="[
    '/images/2025/05-05.webp',
    '/images/2025/05-06.webp',
  ]"
  type="double"
/>

トグルスイッチはLEDの横に増設しましたが、見た目に拘らないのであればもう一段上のノブと同じステージに増設した方が作業しやすいです。

## おわりに

ポップノイズと格闘する時間が長かったのですが、全く聞こえないレベルに落ち着いて良かったです。

ただのトゥルーバイパス化だと大半は元のエフェクターの外側にループスイッチャーを増設するような作業になるので画一化が可能ですが、トレイルバイパス化は機種ごとにベストプラクティスが異なってくるな…という気づきがありました。冒頭で述べたようなモジュール基板ではあまり太刀打ちできないのかもしれません。

<br/>

---
